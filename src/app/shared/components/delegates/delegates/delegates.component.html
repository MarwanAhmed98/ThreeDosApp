<div class="flex min-h-screen bg-app font-sans transition-colors duration-300">
    @if (isMobileMenuOpen) {
    <div (click)="isMobileMenuOpen = false" class="fixed inset-0 bg-black/40 backdrop-blur-sm z-40 lg:hidden"></div>
    }

    <aside [class.translate-x-0]="isMobileMenuOpen" [class.-translate-x-full]="!isMobileMenuOpen"
        class="w-72 bg-surface border-r border-main flex flex-col fixed h-full z-50 transition-all duration-300 lg:translate-x-0">
        <div class="p-8 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div
                    class="w-10 h-10 bg-accent rounded-xl flex items-center justify-center shadow-lg shadow-brand-purple/20">
                    <img src="/images/ThreeDos Logo.jpeg" alt="">
                </div>
                <span class="text-xl font-bold text-main tracking-tight">ThreeDOS</span>
            </div>
            <button (click)="isMobileMenuOpen = false" class="lg:hidden text-muted p-2">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <nav class="flex-1 px-4 space-y-2">
            @for (item of navItems; track item.label) {
            <a [routerLink]="item.route" (click)="currentTitle = item.label"
                routerLinkActive="bg-brand-purple/10 text-brand-purple" [routerLinkActiveOptions]="{ exact: true }"
                class="flex items-center gap-4 px-4 py-4 rounded-2xl font-medium transition-all group text-muted hover:bg-brand-purple/5 hover:text-brand-purple">
                <div class="w-6 flex justify-center">
                    <i [class]="item.iconClass" class="text-lg"></i>
                </div>
                {{ item.label }}
            </a>
            }
        </nav>

        <div class="p-8 border-t border-main">
            <button (click)="LogoutBtn()"
                class="flex items-center gap-4 text-red-500 font-medium hover:opacity-80 transition-opacity">
                <i class="fas fa-sign-out-alt text-lg"></i>
                Logout
            </button>
        </div>
    </aside>

    <main class="flex-1 lg:ml-72 w-full">
        <header
            class="bg-surface/80 backdrop-blur-md sticky top-0 z-30 px-6 lg:px-10 py-4 flex items-center justify-between border-b border-main">
            <div class="flex items-center gap-4">
                <button (click)="isMobileMenuOpen = true"
                    class="lg:hidden p-2 text-muted bg-app border border-main rounded-lg">
                    <i class="fas fa-bars text-xl"></i>
                </button>

                <div class="hidden sm:flex items-center gap-2 text-sm">
                    <span class="text-muted">Delegate</span>
                    <span class="text-brand-surface">/</span>
                    <span class="text-main font-medium">{{ currentTitle }}</span>
                </div>
            </div>

            <div class="flex items-center gap-3 lg:gap-6">
                <div class="relative hidden md:block">
                    <input type="text" placeholder="Search..."
                        class="bg-app border border-main rounded-full py-2.5 pl-12 pr-6 w-48 lg:w-72 text-sm focus:ring-2 focus:ring-brand-purple/20 outline-none text-main placeholder-muted" />
                    <i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-muted"></i>
                </div>

                <button (click)="toggleDarkMode()"
                    class="w-10 h-10 flex items-center justify-center text-muted bg-app border border-main rounded-full hover:bg-brand-purple/10 hover:text-brand-purple transition-all">
                    <i [class]="isDarkMode ? 'fas fa-sun text-amber-400' : 'fas fa-moon'"></i>
                </button>

                <div
                    class="relative w-10 h-10 flex items-center justify-center text-muted bg-app border border-main rounded-full cursor-pointer hover:bg-brand-purple/10 hover:text-brand-purple transition-all">
                    <i class="fas fa-bell"></i>
                    <span
                        class="absolute top-1 right-1 w-2.5 h-2.5 bg-red-500 border-2 border-surface rounded-full"></span>
                </div>

                <img [src]="
            'https://ui-avatars.com/api/?name=' +
            UserName +
            '&background=7F4797&color=ffffff'
          " class="w-10 h-10 rounded-full border border-main shadow-sm" alt="Avatar" />
            </div>
        </header>

        <div class="p-6 lg:p-10">
            <router-outlet></router-outlet>
        </div>
    </main>
</div>